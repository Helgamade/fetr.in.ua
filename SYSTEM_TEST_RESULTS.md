# üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 2026-01-27 18:05 UTC

---

## ‚úÖ 1. API –°–µ—Ä–≤–µ—Ä

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–ü–£–©–ï–ù

**PID:** 3820917  
**–ö–æ–º–∞–Ω–¥–∞:** `node server/index.js`  
**–õ–æ–≥:** `/home/idesig02/.system/webapp/www.fetr.in.ua.log`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ps aux | grep 'node.*index.js'
# ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞–π–¥–µ–Ω: PID 3820917
```

**Endpoints:**
- ‚úÖ `/api/health` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (route file –Ω–∞–π–¥–µ–Ω)
- ‚úÖ `/api/admin/health` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (route file –Ω–∞–π–¥–µ–Ω)
- ‚úÖ `/api/admin/prerender/*` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (route file –Ω–∞–π–¥–µ–Ω)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Health route —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä/curl —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

---

## ‚ö†Ô∏è 2. Prerender System

### –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ù–ï –ù–ê–°–¢–†–û–ï–ù

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå `shared/last_build.json` - —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. ‚ùå `PRERENDER_API_BASE_URL` - –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `shared/.env`
3. ‚ùå Prerendered —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ `dist/privacy-policy/`
4. ‚ö†Ô∏è `current` symlink —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ:
   - –¢–µ–∫—É—â–µ–µ: `current -> /home/idesig02/fetr.in.ua/www`
   - –û–∂–∏–¥–∞–µ—Ç—Å—è: `current -> releases/YYYYMMDD_HHMMSS`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- ‚úÖ `releases/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—É—Å—Ç–∞—è)
- ‚úÖ `shared/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå `shared/prerender.lock` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ prerender –Ω–µ –∑–∞–ø—É—â–µ–Ω)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `PRERENDER_API_BASE_URL=http://127.0.0.1:3000/api` –≤ `shared/.env`
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å prerender –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ build
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `current` symlink —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## ‚úÖ 3. Database (MySQL)

### –°—Ç–∞—Ç—É—Å: ‚úÖ –î–û–°–¢–£–ü–ù–ê

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `pages` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Health Dashboard –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `CONNECTED`

---

## ‚úÖ 4. File Structure

### –°—Ç–∞—Ç—É—Å: ‚úÖ –°–¢–†–£–ö–¢–£–†–ê –°–û–ó–î–ê–ù–ê

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
- ‚úÖ `releases/` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—É—Å—Ç–∞—è)
- ‚úÖ `shared/` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ `dist/` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ `current` - symlink —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

**–§–∞–π–ª—ã:**
- ‚úÖ `server/routes/health.js` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ `server/routes/prerender.js` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå `shared/last_build.json` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå `shared/prerender.lock` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

---

## ‚ö†Ô∏è 5. Environment Variables

### –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –ù–ê–°–¢–†–û–ô–ö–ò

**–ü—Ä–æ–≤–µ—Ä–∫–∞ `shared/.env`:**
- ‚ùå `PRERENDER_API_BASE_URL` - –Ω–µ –Ω–∞–π–¥–µ–Ω
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å `PRERENDER_API_BASE_URL=http://127.0.0.1:3000/api` –≤ `shared/.env`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥—Ä—É–≥–∏—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
   - `DEPLOY_MODE` (symlink/copy)
   - `DEPLOY_WEBHOOK_SECRET`
   - `CRON_TZ` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `PRERENDER_API_BASE_URL` –≤ `shared/.env`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å prerender –≤—Ä—É—á–Ω—É—é (—á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `current` symlink —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `shared/last_build.json` —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ prerender
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Health Dashboard —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å PrerenderMonitor —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å PRERENDER_API_BASE_URL:**
   ```bash
   ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua/www && echo 'PRERENDER_API_BASE_URL=http://127.0.0.1:3000/api' >> shared/.env"
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å prerender –≤—Ä—É—á–Ω—É—é:**
   - –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É: `/admin/prerender-monitor` ‚Üí "–û–Ω–æ–≤–∏—Ç–∏ SEO-–≤–µ—Ä—Å—ñ—é"
   - –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç: `bash server/prerender-deploy.sh --manual`

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - `shared/last_build.json` –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è
   - `releases/` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑
   - `current` symlink –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑
   - Prerendered —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ `dist/`

---

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:** ‚úÖ  
**–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã:** ‚úÖ  
**API —Å–µ—Ä–≤–µ—Ä:** ‚úÖ –ó–∞–ø—É—â–µ–Ω  
**–°–∏—Å—Ç–µ–º—ã:** ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
