# –ü—Ä–∞–≤–∏–ª–∞ –¥–µ–ø–ª–æ—è –¥–ª—è fetr.in.ua

## üöÄ –ö–∞–∫ –¥–µ–ø–ª–æ–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ production —Å–µ—Ä–≤–µ—Ä

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ô —Å–ø–æ—Å–æ–± (Git Deploy):

–ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥:

```powershell
# 1. –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ - —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# 2. –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è dist/ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
git add .

# 3. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# 4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ GitHub (–±—ç–∫–∞–ø)
git push origin main

# 5. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π (—Å–º. –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ)
```

---

## üîÑ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ:

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—á–µ—Ä–µ–∑ Git hook –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç):

```bash
# 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
cd /path/to/fetr.in.ua
git fetch origin
git reset --hard origin/main

# 2. –ö–†–ò–¢–ò–ß–ù–û: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ index.html –ü–ï–†–í–´–ú –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é www!
mkdir -p www/assets
cp dist/index.html www/index.html

# 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ assets –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é www
cp -r dist/assets/* www/assets/

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
chmod 755 www/assets
chmod 644 www/assets/*
chmod 644 www/index.html
chmod 644 public/* 2>/dev/null || true

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd www/server
pkill -f "node.*index.js" || true
sleep 1
nohup node index.js > /dev/null 2>&1 &
cd ../..

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
echo "=== DEPLOYED ==="
```

---

## üìã –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–µ–ø–ª–æ—è:

**–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω–∏:**

```powershell
# –õ–æ–∫–∞–ª—å–Ω–æ
npm run build
git add .
git commit -m "Update"
git push origin main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua/www && git fetch origin && git reset --hard origin/main && npm install && npm run build && mkdir -p assets && cp dist/index.html index.html && cp -r dist/assets/* assets/ && chmod 755 assets && chmod 644 assets/* && chmod 644 index.html && cd server && pkill -f 'node.*index.js' || true && sleep 1 && nohup node index.js > /dev/null 2>&1 & && echo '=== DEPLOYED ==='"
```

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Git Deploy:

### Production remote:
- **SSH —Ö–æ—Å—Ç:** `idesig02@idesig02.ftp.tools`
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `~/deploy.git` (bare)
- **–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `/home/idesig02/fetr.in.ua`
- **Hook:** `~/deploy.git/hooks/post-receive`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```powershell
git remote -v
```

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Failed to load module script: Expected a JavaScript-or-Wasm module script"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å—Ç–∞—Ä—ã–π `index.html`, –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `/src/main.tsx` –≤–º–µ—Å—Ç–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ JS –∏–∑ `dist/assets/`.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ö–†–ò–¢–ò–ß–ù–û: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π index.html –∏–∑ dist/
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && cp dist/index.html index.html && echo '=== INDEX.HTML FIXED ==='"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ index.html –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && tail -5 index.html"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: <script type="module" crossorigin src="/assets/index-*.js"></script>
# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: <script type="module" src="/src/main.tsx"></script>
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ index.html
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && grep -E 'main\.tsx|index-.*\.js' index.html"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: /assets/index-*.js (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª)
# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: /src/main.tsx (–∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª)
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "403 Forbidden" –¥–ª—è CSS/JS —Ñ–∞–π–ª–æ–≤ (–±–µ–ª–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ `assets/` –∏–ª–∏ —Ñ–∞–π–ª–∞–º –≤ –Ω–µ–π.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏: `GET /assets/index-*.css net::ERR_ABORTED 403`
- –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏: `GET /assets/index-*.js net::ERR_ABORTED 403`
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–ª–∞—è, –∫–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ 403

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è assets/ –∏ —Ñ–∞–π–ª–æ–≤
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && chmod 755 assets && chmod 644 assets/* && chmod 644 index.html && echo '=== PERMISSIONS FIXED ==='"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && ls -la assets/"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: drwxr-xr-x –¥–ª—è –ø–∞–ø–∫–∏, -rw-r--r-- –¥–ª—è —Ñ–∞–π–ª–æ–≤
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "fatal: Need to specify how to reconcile divergent branches"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–æ–π.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∂–µ—Å—Ç–∫–∏–π reset
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && git fetch origin && git reset --hard origin/main"
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –§–∞–π–ª—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ

**–ü—Ä–∏—á–∏–Ω–∞**: –ö–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && ls -la dist/assets/ | head -5"

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ index.html –æ–±–Ω–æ–≤–ª–µ–Ω
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && head -5 index.html"

# 3. –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å - –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π
```

**–°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**:
> "–§–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –Ω–æ —Å–∞–π—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R) –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ."

---

### –ü—Ä–æ–±–ª–µ–º–∞ 5: "Permission denied (publickey)"

**–ü—Ä–∏—á–∏–Ω–∞**: SSH –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π.

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
> "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
> 1. SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ `~/.ssh/authorized_keys` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
> 2. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª—é—á—É: `chmod 600 ~/.ssh/id_rsa`
> 3. SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ ssh-agent: `ssh-add ~/.ssh/id_rsa`"

---

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú:

–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && git log --oneline -5"

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Git –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && git status"

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ssh idesig02@idesig02.ftp.tools "ls -la /home/idesig02/fetr.in.ua/"

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ index.html
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && cat index.html | grep -E 'main\.tsx|index-.*\.js'"
```

---

## üîÑ –û–¢–ö–ê–¢ –ò–ó–ú–ï–ù–ï–ù–ò–ô:

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å:

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && git log --oneline -5"

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç (–û–°–¢–û–†–û–ñ–ù–û!)
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && git reset --hard HEAD~1"

# 3. –ò–ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–º–∏—Ç
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && git reset --hard <commit-hash>"

# 4. –ü–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∑–∞–Ω–æ–≤–æ
ssh idesig02@idesig02.ftp.tools "cd /home/idesig02/fetr.in.ua && cp dist/index.html index.html && cp -r dist/assets/* assets/ && chmod 755 assets && chmod 644 assets/* && chmod 644 index.html"
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –£–°–ü–ï–®–ù–û–ì–û –î–ï–ü–õ–û–Ø:

**üö® –ü–ï–†–í–´–ô –ü–†–ò–û–†–ò–¢–ï–¢ - index.html:**

- [ ] `npm run build` –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] **üö®üö®üö® `cp dist/index.html index.html` –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ü–ï–†–í–´–ú (–ö–†–ò–¢–ò–ß–ù–û! –ë–µ–∑ —ç—Ç–æ–≥–æ —Å–∞–π—Ç –ù–ï –ó–ê–ì–†–£–ó–ò–¢–°–Ø!)** üö®üö®üö®
- [ ] **üö® –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ `index.html` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `/assets/index-*.js`, –∞ –ù–ï –Ω–∞ `/src/main.tsx`** üö®
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã –≤ Git
- [ ] `git reset --hard origin/main` –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `cp -r dist/assets/* assets/` –≤—ã–ø–æ–ª–Ω–µ–Ω (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
- [ ] **`chmod 755 assets && chmod 644 assets/* && chmod 644 index.html` –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)** 
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: `curl https://fetr.in.ua/ | head -30`
- [ ] –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤–∏–¥–Ω—ã –Ω–∞ —Å–∞–π—Ç–µ (–æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞)
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ 403 Forbidden –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] **üö® –ù–ï–¢ –û–®–ò–ë–ö–ò "Failed to load module script: Expected a JavaScript-or-Wasm module script" –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞** üö®

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-XX  
**–í–µ—Ä—Å–∏—è:** 1.0

