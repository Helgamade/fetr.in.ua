import{j as e}from"./chunk-lottie-CUWK48HK.js";import{C as N,q as y,u as v,d as w,w as C,B as k,H as A,O as I}from"./index-D-1-rnSq.js";import{C as u,d as h,a as F}from"./card-BNaRNudG.js";import{B as p}from"./button-B--E_fGC.js";import{S as g}from"./separator-CGNaswY2.js";import{P}from"./package-BESqukQ0.js";import{C as S}from"./credit-card-DVZpcTIA.js";import{S as U}from"./shopping-cart-BBnGM1-0.js";import{C as q}from"./chevron-right-BnssONnT.js";import"./chunk-charts-BaLkbnPn.js";const B={created:{label:"Оформлено",color:"bg-blue-100 text-blue-700"},accepted:{label:"Прийнято",color:"bg-purple-100 text-purple-700"},paid:{label:"Оплачено",color:"bg-green-100 text-green-700"},packed:{label:"Спаковано",color:"bg-teal-100 text-teal-700"},shipped:{label:"Відправлено",color:"bg-indigo-100 text-indigo-700"},arrived:{label:"Прибуло",color:"bg-emerald-100 text-emerald-700"},completed:{label:"Залишити відгук",color:"bg-gray-100 text-gray-700"},processing:{label:"В обробці",color:"bg-yellow-100 text-yellow-700"},assembled:{label:"Зібрано",color:"bg-cyan-100 text-cyan-700"},in_transit:{label:"В дорозі",color:"bg-violet-100 text-violet-700"}};function M(){const{user:t}=N(),c=y(),{data:d=[]}=v(),{data:o,isLoading:f}=w({queryKey:["user-orders",t==null?void 0:t.id],queryFn:async()=>{const s=await C.getAll();return(t==null?void 0:t.role)==="admin"?s:s.filter(n=>n.user_id===(t==null?void 0:t.id))},enabled:!!t});return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:e.jsx(k,{className:"h-12 w-12 animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsx("title",{children:"Мої замовлення | FetrInUA"}),e.jsx("meta",{property:"og:title",content:"Мої замовлення | FetrInUA"})]}),e.jsx("div",{className:"min-h-screen bg-muted/30",children:e.jsxs("div",{className:"container max-w-4xl mx-auto space-y-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Мої замовлення"}),e.jsx(p,{variant:"outline",onClick:()=>c("/user/profile"),children:"До профілю"})]}),!o||o.length===0?e.jsx(u,{children:e.jsxs(h,{className:"py-12 text-center",children:[e.jsx(P,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"У вас поки немає замовлень"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Почніть покупки, щоб побачити свої замовлення тут"}),e.jsx(p,{onClick:()=>c("/"),children:"Перейти до магазину"})]})}):e.jsx("div",{className:"space-y-4",children:o.map(s=>{var m,x;const n=B[s.status]||{label:s.status,color:"bg-gray-100 text-gray-700"},b=new Date(s.createdAt),i=((m=s.items)==null?void 0:m.reduce((l,a)=>l+a.quantity,0))||0,r=[];if(s.items&&d.length>0)for(const l of s.items){const a=d.find(j=>j.code===l.productId);if((x=a==null?void 0:a.images)!=null&&x[0]&&!r.includes(a.images[0])&&r.push(a.images[0]),r.length>=4)break}return e.jsxs(u,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(`/user/orders/${s.id}`),children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg",children:["№",s.orderNumber||s.id]}),e.jsx("span",{className:`text-xs font-medium px-2.5 py-0.5 rounded-full ${n.color}`,children:n.label})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:b.toLocaleDateString("uk-UA",{day:"numeric",month:"long",year:"numeric"})})]})}),e.jsxs(h,{className:"space-y-4",children:[r.length>0&&e.jsx("div",{className:"flex gap-2",children:r.map((l,a)=>e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border border-border flex-shrink-0 bg-muted",children:e.jsx("img",{src:l,alt:"",className:"w-full h-full object-cover",loading:"lazy"})},a))}),e.jsx(g,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("span",{className:"flex items-center gap-2 text-foreground",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"text-base font-semibold",children:[I(s.total)," ₴"]})]}),e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(U,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{className:"text-base",children:[i," ",i===1?"товар":i>=2&&i<=4?"товари":"товарів"]})]})]}),e.jsx(q,{className:"h-5 w-5 text-muted-foreground"})]})]})]},s.id)})}),e.jsx(g,{className:"my-8"}),e.jsxs("footer",{className:"text-center space-y-2 pb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2026 FetrInUA. Всі права захищені"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Зроблено з ❤️ в Україні"})]})]})})]})}export{M as default};
