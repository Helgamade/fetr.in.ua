import{j as e}from"./chunk-lottie-CUWK48HK.js";import{r as d}from"./chunk-charts-BaLkbnPn.js";import{B as u}from"./button-BmmBAXyt.js";import{I as h}from"./input-BOCpsPwW.js";import{T as P}from"./textarea-FRIoRZn-.js";import{L as c}from"./label-Sz4ulZDy.js";import{S as M}from"./switch-BdX5hEfm.js";import{C as f,a as x,b,d as v}from"./card-BTArGSOp.js";import{B as k}from"./badge-CUuLbWX9.js";import{c as z,b as F}from"./usePages-BCzM_Rb1.js";import{b as I,C as q,w as A,B as L,aq as w}from"./index-pc54KSMf.js";import{E as D}from"./chunk-editor-CdzZCldp.js";import{A as T}from"./arrow-left-B80bUDw6.js";import{E as B}from"./eye-DLkJaWST.js";import{E as R}from"./eye-off-B1dB1kLA.js";import{S as O}from"./save-poZ54v9c.js";import"./index-ZeZSZmiz.js";function U({content:a,onChange:n,placeholder:r="Введіть текст...",className:p}){const g=d.useRef(null);return e.jsx("div",{className:I("border rounded-lg overflow-hidden",p),children:e.jsx(D,{apiKey:"5d1p6abbg6cfswxaikso0fiwwlpcvppyeqv09wld5lk9w4sx",onInit:(i,m)=>{g.current=m},value:a,onEditorChange:i=>{n(i)},init:{height:700,menubar:!1,placeholder:r,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","emoticons","codesample","nonbreaking","pagebreak","save","visualchars","accordion"],toolbar:["undo redo | blocks | styles | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | blockquote","link image media | charmap emoticons | insertdatetime | anchor | table | codesample | visualblocks visualchars | searchreplace | nonbreaking pagebreak | save accordion | removeformat | code | preview | fullscreen | help"],style_formats:[{title:"Текст без обгортки",inline:"span",remove:"p",styles:{display:"inline"}},{title:"Цитата",block:"blockquote",wrapper:!0,classes:"quote-style"},{title:"Блок з відступом",block:"div",classes:"indent-block",wrapper:!0},{title:"Блок з фоном",block:"div",classes:"highlight-block",wrapper:!0},{title:"Блок з рамкою",block:"div",classes:"bordered-block",wrapper:!0}],style_formats_merge:!1,content_style:`
            body { 
              font-family: Nunito, sans-serif; 
              font-size: 18px; 
              line-height: 1.6;
              color: hsl(var(--foreground));
              background: hsl(var(--background));
            }
            h1 {
              font-family: Montserrat, sans-serif;
              font-size: 36px;
              font-weight: 700;
              margin-top: 2rem;
              margin-bottom: 1.5rem;
            }
            h2 {
              font-family: Montserrat, sans-serif;
              font-size: 24px;
              font-weight: 600;
              margin-top: 2rem;
              margin-bottom: 1rem;
            }
            h3 {
              font-family: Montserrat, sans-serif;
              font-size: 16px;
              font-weight: 700;
              margin-top: 1.5rem;
              margin-bottom: 0.75rem;
            }
            h4 {
              font-family: Montserrat, sans-serif;
              font-size: 14px;
              font-weight: 700;
              margin-top: 1rem;
              margin-bottom: 0.5rem;
            }
            h5 {
              font-family: Montserrat, sans-serif;
              font-size: 13px;
              font-weight: 700;
              margin-top: 1rem;
              margin-bottom: 0.5rem;
            }
            h6 {
              font-family: Montserrat, sans-serif;
              font-size: 12px;
              font-weight: 700;
              margin-top: 0.75rem;
              margin-bottom: 0.5rem;
            }
            p {
              margin-top: 0;
              margin-bottom: 1rem;
            }
            ul, ol {
              margin-top: 1rem;
              margin-bottom: 1rem;
              padding-left: 1.5rem;
            }
            li {
              margin-top: 0.5rem;
              margin-bottom: 0.5rem;
            }
            ul ul, ol ol, ul ol, ol ul {
              margin-top: 0.5rem;
              margin-bottom: 0.5rem;
              padding-left: 1.5rem;
            }
            ul ul {
              list-style-type: circle;
            }
            ul ul ul {
              list-style-type: square;
            }
            ol ol {
              list-style-type: lower-alpha;
            }
            ol ol ol {
              list-style-type: lower-roman;
            }
            blockquote {
              margin-top: 1.5rem;
              margin-bottom: 1.5rem;
              padding: 1rem;
              padding-left: 1.5rem;
              border-left: 4px solid #f97316;
              background: rgba(245, 245, 245, 0.5);
              font-style: italic;
            }
            .indent-block {
              margin-top: 1rem;
              margin-bottom: 1rem;
              padding-left: 2rem;
              padding-right: 1rem;
              border-left: 2px solid #e5e7eb;
              display: block;
            }
            .highlight-block {
              margin-top: 1rem;
              margin-bottom: 1rem;
              padding: 1rem;
              background: rgba(245, 245, 245, 0.8);
              border-radius: 0.5rem;
              display: block;
            }
            .bordered-block {
              margin-top: 1rem;
              margin-bottom: 1rem;
              padding: 1rem;
              border: 1px solid #e5e7eb;
              border-radius: 0.5rem;
              background: #ffffff;
              display: block;
            }
            hr {
              margin-top: 2rem;
              margin-bottom: 2rem;
              border-top: 1px solid hsl(var(--border));
            }
            pre {
              margin-top: 1.5rem;
              margin-bottom: 1.5rem;
              padding: 1rem;
              background: hsl(var(--muted));
              border-radius: 0.5rem;
              overflow-x: auto;
            }
            a {
              color: hsl(var(--primary));
              text-decoration: none;
            }
            a:hover {
              text-decoration: underline;
            }
          `,skin:"oxide",content_css:!1}})})}function ne(){const{id:a}=q(),n=A(),{toast:r}=L(),p=z(),g=F(),[i,m]=d.useState(null),[N,j]=d.useState(!0),[_,y]=d.useState(!1),[s,l]=d.useState({slug:"",title:"",content:"",meta_title:"",meta_description:"",is_published:!0});d.useEffect(()=>{a&&(a==="new"?(m(null),l({slug:"",title:"",content:"",meta_title:"",meta_description:"",is_published:!0}),j(!1)):w.getAll().then(t=>{const o=t.find(S=>S.id===parseInt(a));o?(m(o),l({slug:o.slug,title:o.title,content:o.content,meta_title:o.meta_title||"",meta_description:o.meta_description||"",is_published:o.is_published})):(r({title:"Помилка",description:"Сторінку не знайдено",variant:"destructive"}),n("/admin/pages"))}).catch(t=>{r({title:"Помилка",description:t.message||"Не вдалося завантажити сторінку",variant:"destructive"}),n("/admin/pages")}).finally(()=>j(!1)))},[a,n,r]);const C=async()=>{if(!s.slug||!s.title||!s.content){r({title:"Помилка",description:"Заповніть всі обов'язкові поля",variant:"destructive"});return}y(!0);try{if(a==="new"){const t=await w.create(s);r({title:"Створено",description:"Сторінку успішно створено"}),n(`/admin/pages/${t.id}`)}else i&&(await p.mutateAsync({id:i.id,...s}),r({title:"Збережено",description:"Сторінку успішно оновлено"}),m({...i,...s}))}catch(t){r({title:"Помилка",description:t.message||"Не вдалося зберегти сторінку",variant:"destructive"})}finally{y(!1)}},E=async()=>{if(!(!i||!confirm(`Ви впевнені, що хочете видалити сторінку "${i.title}"?`)))try{await g.mutateAsync(i.id),r({title:"Видалено",description:"Сторінку успішно видалено"}),n("/admin/pages")}catch(t){r({title:"Помилка",description:t.message||"Не вдалося видалити сторінку",variant:"destructive"})}};return N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"Завантаження сторінки..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>n("/admin/pages"),children:e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a==="new"?"Створити нову сторінку":`Редагувати: ${(i==null?void 0:i.title)||""}`}),i&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["URL: ",e.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:["/",i.slug]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(e.Fragment,{children:[i.is_published?e.jsxs(k,{variant:"default",className:"bg-green-100 text-green-800",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"Опубліковано"]}):e.jsxs(k,{variant:"secondary",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),"Чернетка"]}),e.jsx(u,{variant:"destructive",onClick:E,disabled:g.isPending,children:"Видалити"})]}),e.jsxs(u,{onClick:C,disabled:_||p.isPending,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Зберегти"]})]})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(f,{children:[e.jsx(x,{children:e.jsx(b,{children:"Основна інформація"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"slug",children:"URL (slug) *"}),e.jsx(h,{id:"slug",value:s.slug,onChange:t=>l({...s,slug:t.target.value}),placeholder:"polityka-konfidentsiynosti"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Використовуйте тільки латинські літери, цифри та дефіси"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"title",children:"Назва сторінки *"}),e.jsx(h,{id:"title",value:s.title,onChange:t=>l({...s,title:t.target.value}),placeholder:"Політика конфіденційності"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"published",checked:s.is_published,onCheckedChange:t=>l({...s,is_published:t})}),e.jsx(c,{htmlFor:"published",children:"Опубліковано"})]})]})]}),e.jsxs(f,{children:[e.jsx(x,{children:e.jsx(b,{children:"SEO налаштування"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"meta-title",children:"Meta Title (SEO)"}),e.jsx(h,{id:"meta-title",value:s.meta_title,onChange:t=>l({...s,meta_title:t.target.value}),placeholder:"Політика конфіденційності - FetrInUA"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"meta-description",children:"Meta Description (SEO)"}),e.jsx(P,{id:"meta-description",value:s.meta_description,onChange:t=>l({...s,meta_description:t.target.value}),placeholder:"Опис сторінки для пошукових систем",rows:3})]})]})]}),e.jsxs(f,{children:[e.jsx(x,{children:e.jsx(b,{children:"Зміст сторінки *"})}),e.jsx(v,{children:e.jsx(U,{content:s.content,onChange:t=>l({...s,content:t}),placeholder:"Введіть текст сторінки..."})})]})]})]})}export{ne as PageDetail};
