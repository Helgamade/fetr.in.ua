import{j as e}from"./chunk-lottie-CUWK48HK.js";import{r as x}from"./chunk-charts-BaLkbnPn.js";import{B as n}from"./button-DG9yyTn4.js";import{I as o}from"./input-C8MN0q5Y.js";import{C as w,d as C}from"./card-igq2keB_.js";import{B as Z}from"./badge-DcYUsBHK.js";import{D as ee,a as se,b as ae,c as te,e as le,d as ie}from"./dialog-zyqD8-tu.js";import{L as r}from"./label-dRfCDN3h.js";import{T as d}from"./textarea-BP6Whs6n.js";import{T as re,a as ne,b as u,c as p}from"./tabs-CC7FjVXR.js";import{c as ce,u as oe,a1 as de,a2 as me,z as xe,a3 as he,a4 as ue,B as pe,X as k}from"./index-PkMCHakf.js";import{u as ge}from"./useTranslation-ag0-NFsi.js";import{S as je}from"./search-CeuwdG2R.js";import{P as f,T as ve}from"./trash-2-DLlpEoQ4.js";import{E as fe}from"./eye-CfHBhL90.js";import{S as G}from"./shopping-cart-MyKgNnmQ.js";import{P as Ne}from"./package-CT8Y1GIR.js";import{C as M}from"./check-BHmVkW1m.js";import{C as O}from"./copy-BfFDRkF8.js";import{S as be}from"./square-pen-APCsC5-m.js";import{U as ye}from"./upload-D2VCESfw.js";import{C as R}from"./chevron-up-DcTpqudv.js";import{C as E}from"./chevron-down-BEUdOPK5.js";import"./index-DCHUBSpR.js";import"./Combination-B-Pk3O6O.js";import"./index-D4-djExh.js";import"./useTexts-BBRfbdRf.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Ce=ce("link",we),ke={hit:"bg-red-100 text-red-800",recommended:"bg-green-100 text-green-800",limited:"bg-purple-100 text-purple-800"};function Ze(){const{t:g}=ge("product"),{data:N=[],isLoading:B}=oe(),S=de(),A=me(),[b,$]=x.useState(""),[a,i]=x.useState(null),[y,j]=x.useState(!1),[P,q]=x.useState([]),[I,_]=x.useState([]),[D,L]=x.useState(null),[F,T]=x.useState(null),v=x.useRef({}),{toast:m}=xe(),z=s=>{const t=`https://fetr.in.ua/nabory-fetru/${s.slug}`;navigator.clipboard.writeText(t).then(()=>{T(s.id),setTimeout(()=>T(null),2e3)})},Q={hit:g("badge.hit"),recommended:g("badge.recommended"),limited:g("badge.limited")};x.useEffect(()=>{y&&Promise.all([he.getAll(),ue.getAll()]).then(([s,t])=>{q(s),_(t)}).catch(()=>{m({title:"Помилка",description:"Не вдалося завантажити опції або матеріали",variant:"destructive"})})},[y,m]);const U=N.filter(s=>s.name.toLowerCase().includes(b.toLowerCase())||s.shortDescription.toLowerCase().includes(b.toLowerCase())),X=s=>{i({...s,images:s.images&&s.images.length>0?[...s.images]:[""]}),j(!0)},H=()=>{if(!a)return;const s={...a,options:a.options.map((t,l)=>({id:t.id,sortOrder:l,orderCount:t.orderCount??null,badge:t.badge??null})),materials:a.materials.map(t=>t.id),images:a.images.filter(t=>t&&t.trim())};S.mutate({id:a.id,data:s},{onSuccess:()=>{m({title:"Збережено",description:`Товар "${a.name}" оновлено`}),j(!1),i(null)},onError:t=>{m({title:"Помилка",description:t.message||"Не вдалося зберегти товар",variant:"destructive"})}})},J=async(s,t)=>{L(s);const l=new FormData;l.append("image",t);try{const c=await fetch("/api/products/upload-image",{method:"POST",body:l});if(!c.ok)throw new Error("Помилка завантаження файлу");const h=await c.json(),V=[...(a==null?void 0:a.images)||[]];V[s]=h.url,i({...a,images:V}),m({title:"Успішно",description:"Зображення завантажено"})}catch(c){m({title:"Помилка",description:c.message||"Не вдалося завантажити зображення",variant:"destructive"})}finally{L(null)}},K=(s,t)=>{var c;const l=(c=t.target.files)==null?void 0:c[0];l&&J(s,l),v.current[s]&&(v.current[s].value="")},W=s=>{const t=N.find(l=>l.id===s);A.mutate(s,{onSuccess:()=>{m({title:"Видалено",description:`Товар "${t==null?void 0:t.name}" видалено`,variant:"destructive"})},onError:l=>{m({title:"Помилка",description:l.message||"Не вдалося видалити товар",variant:"destructive"})}})},Y=(s,t)=>{const l=N.find(c=>c.id===s);l&&S.mutate({id:s,data:{...l,stock:Math.max(0,t)}})};return B?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"Завантаження товарів..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{children:e.jsx(C,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(je,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(o,{placeholder:"Пошук товарів...",value:b,onChange:s=>$(s.target.value),className:"pl-9"})]}),e.jsxs(n,{onClick:()=>{m({title:"Функція в розробці",description:"Додавання нових товарів буде доступне пізніше"})},children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Додати товар"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(s=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsxs("div",{className:"aspect-video relative",children:[e.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover"}),s.badge&&e.jsx(Z,{className:`absolute top-2 right-2 ${ke[s.badge]}`,children:Q[s.badge]})]}),e.jsxs(C,{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.shortDescription})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["₴",s.salePrice||s.basePrice]}),s.salePrice&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["₴",s.basePrice]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"h-4 w-4"}),s.viewCount]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),s.purchaseCount," (маркет.)"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),s.actualPurchaseCount||0," (факт.)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"На складі:"}),e.jsx(o,{type:"number",value:s.stock,onChange:t=>Y(s.id,parseInt(t.target.value)||0),className:"w-20 h-8 text-center",min:0})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 text-xs",children:[e.jsx(Ce,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground truncate flex-1",children:["/nabory-fetru/",s.slug]}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:()=>z(s),title:"Скопіювати пряме посилання",children:F===s.id?e.jsx(M,{className:"h-3 w-3 text-green-600"}):e.jsx(O,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>X(s),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Редагувати"]}),e.jsx(n,{variant:"outline",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>W(s.id),children:e.jsx(ve,{className:"h-4 w-4"})})]})]})]},s.id))}),U.length===0&&e.jsx(w,{children:e.jsx(C,{className:"py-8 text-center text-muted-foreground",children:"Товари не знайдено"})}),e.jsx(ee,{open:y,onOpenChange:j,children:e.jsxs(se,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ae,{children:[e.jsx(te,{children:"Редагувати товар"}),e.jsx(le,{className:"sr-only",children:"Форма редагування товару: основна інформація, зображення, опції та матеріали"})]}),a&&e.jsxs(re,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ne,{className:"grid w-full grid-cols-7",children:[e.jsx(u,{value:"basic",children:"Основне"}),e.jsx(u,{value:"images",children:"Зображення"}),e.jsx(u,{value:"features",children:"Що входить"}),e.jsx(u,{value:"materials",children:"Матеріали"}),e.jsx(u,{value:"canMake",children:"Що можна зробити"}),e.jsx(u,{value:"suitableFor",children:"Підходить для"}),e.jsx(u,{value:"options",children:"Опції"})]}),e.jsxs(p,{value:"basic",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Назва"}),e.jsx(o,{id:"name",value:a.name,onChange:s=>i({...a,name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"shortDescription",children:"Короткий опис"}),e.jsx(d,{id:"shortDescription",value:a.shortDescription,onChange:s=>i({...a,shortDescription:s.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"fullDescription",children:"Повний опис"}),e.jsx(d,{id:"fullDescription",value:a.fullDescription,onChange:s=>i({...a,fullDescription:s.target.value}),rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"basePrice",children:"Базова ціна (₴)"}),e.jsx(o,{id:"basePrice",type:"number",value:a.basePrice,onChange:s=>i({...a,basePrice:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"salePrice",children:"Ціна зі знижкою (₴)"}),e.jsx(o,{id:"salePrice",type:"number",value:a.salePrice||"",onChange:s=>i({...a,salePrice:s.target.value?parseFloat(s.target.value):void 0})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"stock",children:"Кількість на складі"}),e.jsx(o,{id:"stock",type:"number",value:a.stock,onChange:s=>i({...a,stock:parseInt(s.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"dailySalesTarget",children:"Цільові продажі в день"}),e.jsx(o,{id:"dailySalesTarget",type:"number",value:a.dailySalesTarget||"",onChange:s=>i({...a,dailySalesTarget:s.target.value?parseInt(s.target.value):void 0}),placeholder:"Наприклад: 7"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Використовується для модуля Social Proof та відображення "X купили сьогодні"'})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"badge",children:"Бейдж"}),e.jsxs("select",{id:"badge",value:a.badge||"",onChange:s=>i({...a,badge:s.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[e.jsx("option",{value:"",children:"Без бейджа"}),e.jsx("option",{value:"hit",children:g("badge.hit")}),e.jsx("option",{value:"recommended",children:g("badge.recommended")}),e.jsx("option",{value:"limited",children:g("badge.limited")})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"displayOrder",children:"Порядок відображення"}),e.jsx(o,{id:"displayOrder",type:"number",value:a.displayOrder||0,onChange:s=>i({...a,displayOrder:parseInt(s.target.value)||0}),placeholder:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Менше значення = вище в списку. Рекомендовано: Стартовий=1, Оптимальний=2, Преміум=3"})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{htmlFor:"slug",children:"Пряме посилання (slug)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex items-center text-sm text-muted-foreground border border-input rounded-l-md px-3 bg-muted whitespace-nowrap",children:"fetr.in.ua/nabory-fetru/"}),e.jsx(o,{id:"slug",value:a.slug,onChange:s=>i({...a,slug:s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),placeholder:"optimal",className:"rounded-l-none"}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>z(a),title:"Скопіювати посилання",children:F===a.id?e.jsx(M,{className:"h-4 w-4 text-green-600"}):e.jsx(O,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Тільки латинські букви, цифри та дефіс. Пряме посилання: ",e.jsxs("code",{className:"bg-muted px-1 rounded",children:["https://fetr.in.ua/nabory-fetru/",a.slug]})]})]})]}),e.jsx(p,{value:"images",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Зображення товару"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Додайте URL зображень або завантажте файли з комп'ютера (кнопка з іконкою завантаження). Перше зображення буде основним. Можна додавати необмежену кількість."}),e.jsxs("div",{className:"space-y-3",children:[a.images.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx(o,{value:s,onChange:l=>{const c=[...a.images];c[t]=l.target.value,i({...a,images:c})},placeholder:"https://example.com/image.jpg або завантажте файл",className:"flex-1"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",ref:l=>v.current[t]=l,onChange:l=>K(t,l),className:"hidden",id:`file-upload-${t}`}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>{var l;return(l=v.current[t])==null?void 0:l.click()},disabled:D===t,title:"Завантажити зображення",children:D===t?e.jsx(pe,{className:"h-4 w-4 animate-spin"}):e.jsx(ye,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex gap-1",children:[t>0&&e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>{const l=[...a.images];[l[t-1],l[t]]=[l[t],l[t-1]],i({...a,images:l})},children:"↑"}),t<a.images.length-1&&e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>{const l=[...a.images];[l[t],l[t+1]]=[l[t+1],l[t]],i({...a,images:l})},children:"↓"}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>{const l=a.images.filter((c,h)=>h!==t);i({...a,images:l})},children:e.jsx(k,{className:"h-4 w-4"})})]}),s&&e.jsx("div",{className:"w-20 h-20 border rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"w-full h-full object-cover",onError:l=>{l.target.style.display="none"}})})]},t)),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{i({...a,images:[...a.images,""]})},children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Додати зображення"]})]})]})}),e.jsx(p,{value:"features",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Що входить (по одній на рядок)"}),e.jsx(d,{value:a.features.join(`
`),onChange:s=>i({...a,features:s.target.value.split(`
`).filter(Boolean)}),rows:8,placeholder:`20 кольорів фетру (20×20 см)
Повний набір інструментів
20+ шаблонів різної складності`})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{children:"Текст додаткових позицій"}),e.jsx(o,{value:a.featuresExtraText||"",onChange:s=>i({...a,featuresExtraText:s.target.value}),placeholder:"+ ще 2 позицій"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Текст, який відображається після перших 3 позицій у картці товару (наприклад, "+ ще 2 позицій")'})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{children:'SVG іконка для заголовка "Що входить"'}),e.jsx(d,{value:a.sectionIconFeatures||"",onChange:s=>i({...a,sectionIconFeatures:s.target.value}),placeholder:"Вставте SVG код або URL іконки",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Можна вставити SVG код або URL до зображення. Іконка буде відображатися перед заголовком секції."})]})]})}),e.jsx(p,{value:"materials",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Вибрані матеріали (відсортовані для цього товару)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Використовуйте кнопки ↑ ↓ для зміни порядку відображення"}),a.materials.length>0?e.jsx("div",{className:"space-y-2",children:a.materials.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",disabled:t===0,onClick:()=>{const l=[...a.materials];[l[t-1],l[t]]=[l[t],l[t-1]],i({...a,materials:l})},children:e.jsx(R,{className:"h-3 w-3"})}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",disabled:t===a.materials.length-1,onClick:()=>{const l=[...a.materials];[l[t],l[t+1]]=[l[t+1],l[t]],i({...a,materials:l})},children:e.jsx(E,{className:"h-3 w-3"})})]}),s.thumbnail&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.thumbnail,alt:s.name,className:"w-12 h-12 object-cover rounded border"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",onClick:()=>{i({...a,materials:a.materials.filter(l=>l.id!==s.id)})},children:e.jsx(k,{className:"h-4 w-4"})})]},s.id))}):e.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center border rounded-lg",children:"Матеріали не вибрані. Додайте матеріали зі списку нижче."})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Доступні матеріали для додавання"}),I.filter(s=>!a.materials.some(t=>t.id===s.id)).length>0?e.jsx("div",{className:"space-y-2 mt-3",children:I.filter(s=>!a.materials.some(t=>t.id===s.id)).map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[s.thumbnail&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.thumbnail,alt:s.name,className:"w-12 h-12 object-cover rounded border"})}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>{i({...a,materials:[...a.materials,s]})},children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),"Додати"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]})]},s.id))}):e.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center border rounded-lg mt-3",children:'Всі доступні матеріали додано або матеріали відсутні. Створіть нові матеріали в розділі "Матеріали".'})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{children:'SVG іконка для заголовка "Матеріали"'}),e.jsx(d,{value:a.sectionIconMaterials||"",onChange:s=>i({...a,sectionIconMaterials:s.target.value}),placeholder:"Вставте SVG код або URL іконки",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Можна вставити SVG код або URL до зображення. Іконка буде відображатися перед заголовком секції."})]})]})}),e.jsx(p,{value:"canMake",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Що можна зробити (по одній на рядок)"}),e.jsx(d,{value:a.canMake.join(`
`),onChange:s=>i({...a,canMake:s.target.value.split(`
`).filter(Boolean)}),rows:8,placeholder:`М'які іграшки
Мобілі для малюків
Розвиваючі книжки`})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{children:'SVG іконка для заголовка "Що можна зробити"'}),e.jsx(d,{value:a.sectionIconCanMake||"",onChange:s=>i({...a,sectionIconCanMake:s.target.value}),placeholder:"Вставте SVG код або URL іконки",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Можна вставити SVG код або URL до зображення. Іконка буде відображатися перед заголовком секції."})]})]})}),e.jsx(p,{value:"suitableFor",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Підходить для (по одній на рядок)"}),e.jsx(d,{value:a.suitableFor.join(`
`),onChange:s=>i({...a,suitableFor:s.target.value.split(`
`).filter(Boolean)}),rows:6,placeholder:`Вся родина
Садочок
Школа
Подарунок`})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{children:'SVG іконка для заголовка "Підходить для"'}),e.jsx(d,{value:a.sectionIconSuitableFor||"",onChange:s=>i({...a,sectionIconSuitableFor:s.target.value}),placeholder:"Вставте SVG код або URL іконки",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Можна вставити SVG код або URL до зображення. Іконка буде відображатися перед заголовком секції."})]})]})}),e.jsx(p,{value:"options",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Вибрані опції (відсортовані для цього товару)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Використовуйте кнопки ↑ ↓ для зміни порядку відображення"}),a.options.length>0?e.jsx("div",{className:"space-y-2",children:a.options.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",disabled:t===0,onClick:()=>{const l=[...a.options];[l[t-1],l[t]]=[l[t],l[t-1]],i({...a,options:l})},children:e.jsx(R,{className:"h-3 w-3"})}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",disabled:t===a.options.length-1,onClick:()=>{const l=[...a.options];[l[t],l[t+1]]=[l[t+1],l[t]],i({...a,options:l})},children:e.jsx(E,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"text-sm font-semibold text-primary mt-1",children:["+",s.price," ₴"]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Замовили разом (кількість)"}),e.jsx(o,{type:"number",min:"0",placeholder:"0",className:"h-7 text-xs",value:s.orderCount??"",onChange:l=>{const c=l.target.value===""?void 0:parseInt(l.target.value,10);i({...a,options:a.options.map(h=>h.id===s.id?{...h,orderCount:c}:h)})}})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Бейдж (напр. ⭐ Популярне)"}),e.jsx(o,{type:"text",placeholder:"⭐ Популярне",className:"h-7 text-xs",value:s.badge??"",onChange:l=>{i({...a,options:a.options.map(c=>c.id===s.id?{...c,badge:l.target.value||void 0}:c)})}})]})]})]}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",onClick:()=>{i({...a,options:a.options.filter(l=>l.id!==s.id)})},children:e.jsx(k,{className:"h-4 w-4"})})]},s.id))}):e.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center border rounded-lg",children:"Опції не вибрані. Додайте опції зі списку нижче."})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Доступні опції для додавання"}),P.filter(s=>!a.options.some(t=>t.id===s.id)).length>0?e.jsx("div",{className:"space-y-2 mt-3",children:P.filter(s=>!a.options.some(t=>t.id===s.id)).map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>{i({...a,options:[...a.options,s]})},children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),"Додати"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"text-sm font-semibold text-primary mt-1",children:["+",s.price," ₴"]})]})]},s.id))}):e.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center border rounded-lg mt-3",children:'Всі доступні опції додано або опції відсутні. Створіть нові опції в розділі "Опції".'})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(r,{children:'SVG іконка для заголовка "Додаткові опції"'}),e.jsx(d,{value:a.sectionIconOptions||"",onChange:s=>i({...a,sectionIconOptions:s.target.value}),placeholder:"Вставте SVG код або URL іконки",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Можна вставити SVG код або URL до зображення. Іконка буде відображатися перед заголовком секції."})]})]})})]}),e.jsxs(ie,{children:[e.jsx(n,{variant:"outline",onClick:()=>j(!1),children:"Скасувати"}),e.jsx(n,{onClick:H,children:"Зберегти"})]})]})})]})}export{Ze as Products};
