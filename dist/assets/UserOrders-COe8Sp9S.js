import{j as e}from"./chunk-lottie-CUWK48HK.js";import{C as b,q as f,u as j,d as N,w as y,B as v,H as w,O as C}from"./index-BjXaBgmo.js";import{B as A}from"./button-D3cQCCEg.js";import{A as k}from"./arrow-left-DxDd4SHe.js";import{P as I}from"./package-ZQ84Hb20.js";import{C as F}from"./credit-card-DZGhVfYh.js";import{S as P}from"./shopping-cart-BsOB2JKZ.js";import{C as U}from"./chevron-right-CPShFtJY.js";import"./chunk-charts-BaLkbnPn.js";const q={created:{label:"Оформлено",color:"bg-blue-100 text-blue-700"},accepted:{label:"Прийнято",color:"bg-purple-100 text-purple-700"},paid:{label:"Оплачено",color:"bg-green-100 text-green-700"},packed:{label:"Спаковано",color:"bg-teal-100 text-teal-700"},shipped:{label:"Відправлено",color:"bg-indigo-100 text-indigo-700"},arrived:{label:"Прибуло",color:"bg-emerald-100 text-emerald-700"},completed:{label:"Залишити відгук",color:"bg-gray-100 text-gray-700"},processing:{label:"В обробці",color:"bg-yellow-100 text-yellow-700"},assembled:{label:"Зібрано",color:"bg-cyan-100 text-cyan-700"},in_transit:{label:"В дорозі",color:"bg-violet-100 text-violet-700"}};function z(){const{user:s}=b(),d=f(),{data:m=[]}=j(),{data:a,isLoading:p}=N({queryKey:["user-orders",s==null?void 0:s.id],queryFn:async()=>{const t=await y.getAll();return(s==null?void 0:s.role)==="admin"?t:t.filter(i=>i.user_id===(s==null?void 0:s.id))},enabled:!!s});if(p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:e.jsx(v,{className:"h-12 w-12 animate-spin text-primary"})});const n=(a==null?void 0:a.length)??0;return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx("title",{children:"Мої замовлення | FetrInUA"}),e.jsx("meta",{property:"og:title",content:"Мої замовлення | FetrInUA"})]}),e.jsx("div",{className:"min-h-screen bg-muted/30",children:e.jsxs("div",{className:"container max-w-2xl mx-auto px-4 pb-12",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent rounded-2xl px-6 py-6 mt-6 mb-6",children:[e.jsxs("button",{onClick:()=>d("/user/profile"),className:"flex items-center gap-1 text-primary-foreground/80 hover:text-primary-foreground text-sm mb-3 transition-colors",children:[e.jsx(k,{className:"w-4 h-4"}),"До профілю"]}),e.jsx("h1",{className:"text-2xl font-bold text-primary-foreground",children:"Мої замовлення"}),e.jsxs("p",{className:"text-primary-foreground/80 text-sm mt-1",children:[n," ",n===1||n>=2&&n<=4?"замовлення":"замовлень"]})]}),!a||a.length===0?e.jsxs("div",{className:"bg-card rounded-2xl p-10 text-center shadow-sm",children:[e.jsx(I,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"У вас поки немає замовлень"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Почніть покупки, щоб побачити свої замовлення тут"}),e.jsx(A,{onClick:()=>d("/"),children:"Перейти до магазину"})]}):e.jsx("div",{className:"space-y-4",children:a.map(t=>{var x,u;const i=q[t.status]||{label:t.status,color:"bg-gray-100 text-gray-700"},g=new Date(t.createdAt),c=((x=t.items)==null?void 0:x.reduce((o,r)=>o+r.quantity,0))||0,l=[];if(t.items&&m.length>0)for(const o of t.items){const r=m.find(h=>h.code===o.productId);if((u=r==null?void 0:r.images)!=null&&u[0]&&!l.includes(r.images[0])&&l.push(r.images[0]),l.length>=4)break}return e.jsx("div",{className:"bg-card rounded-2xl shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden",onClick:()=>d(`/user/orders/${t.id}`),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-foreground",children:["№",t.orderNumber||t.id]}),e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${i.color}`,children:i.label})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:g.toLocaleDateString("uk-UA",{day:"numeric",month:"long",year:"numeric"})})]}),l.length>0&&e.jsx("div",{className:"flex gap-2 mb-4",children:l.map((o,r)=>e.jsx("div",{className:"w-[72px] h-[72px] rounded-xl overflow-hidden border border-border flex-shrink-0 bg-muted",children:e.jsx("img",{src:o,alt:"",className:"w-full h-full object-cover",loading:"lazy"})},r))}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(F,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"font-semibold",children:[C(t.total)," ₴"]})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(P,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[c," ",c===1?"товар":c>=2&&c<=4?"товари":"товарів"]})]})]}),e.jsx(U,{className:"w-5 h-5 text-muted-foreground"})]})]})},t.id)})}),e.jsxs("div",{className:"border-t border-border mt-10 pt-6 text-center space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2026 FetrInUA. Всі права захищені"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Зроблено з ❤️ в Україні"})]})]})})]})}export{z as default};
